# ========================================
# ü§ñ AI Service - Dockerfile
# ========================================

# √âtape 1 : Image de base l√©g√®re
FROM python:3.11-slim

# √âviter la g√©n√©ration de fichiers pyc + activer logs imm√©diats
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# D√©finir le r√©pertoire de travail
WORKDIR /app

# √âtape 2 : Copier uniquement les d√©pendances pour le cache
COPY requirements.txt .

# √âtape 3 : Installer les d√©pendances
RUN pip install --no-cache-dir --upgrade pip \
    && pip install --no-cache-dir -r requirements.txt

# √âtape 4 : Copier le reste du code du projet
COPY . .

# √âtape 5 : Exposer le port utilis√© par FastAPI
EXPOSE 8001

# √âtape 6 : D√©marrer l'application
CMD ["uvicorn", "app:app", "--host", "0.0.0.0", "--port", "8001"]
